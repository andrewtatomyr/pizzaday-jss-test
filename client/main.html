<head>
  <title>Pizza Day</title>
</head>

<body>
  <h1>Pizza Day!</h1>
  {{> loginButtons}}
  {{> afterSignIn}}




</body>





<template name="afterSignIn">
  <div class="{{signedClass}}" >
    {{> groups}}
    {{> groupControls}}
  </div>

</template>





<template name="groups">
  <h2>Select Group or Create a New One</h2>
  {{#each group}}
    <a href="#{{groupName}}" class="group {{selectedClass}}">{{groupName}}</a>
  {{/each}}
  <form class="" action="" method="post">
    <input id=groupName name="groupName" value="" placeholder="New Group Name ({{currentUser}})" required>
    <input type="submit" name="createGroup" value="Create New Group">
  </form>
</template>




<template name="groupControls">
  <div class="{{creatorClass}}">
    {{> participantsList}}
    {{> usersList}}
    {{> eventPizzaDayControls}}
  </div>
  <div class="{{participantClass}}">
    {{> menuList}}
    {{> createMenuItem}}
    {{> eventPizzaDay}}
  </div>
</template>




<template name="usersList">
  <form class="" action="index.html" method="post">
    <!-- h2>Registered Users:</h2 -->
    <select name="selectedUser">
      {{#each user}}
        <option>{{profile.name}}</option>
      {{/each}}
    </select>
    <input type="submit" name="addUserToGroup" value="Add User to '{{selectedGroup}}'">

  </form>
</template>





<template name="participantsList">
  <h2>Users In '{{selectedGroup}}' Group</h2>
  <!-- form action="" method="post" -->
    <ul>
      {{#each participant}}
        <li  >
          {{name}} ({{group}})
          <input type="button" class="removeParticipant" value="Remove">
        </li>
      {{/each}}
    </ul>
    <!-- input type="submit" name="addUserToGroup" value="Add User" -->
  <!-- /form -->
</template>





<template name="menuList">
  <h2>Menu</h2>
  <ul>
    {{#each menuItem}}
      <li class="menuItem" >
        <span class="{{visibleClass.show}}">
          <span class="itemNameAndPrice" title="Click To Edit">
            {{itemName}} (${{itemPrice}}) [{{_id}}]
          </span>
          <button class="orderItem {{eventClass}}">Add to Order</button>
          {{#if coupons}}
            {{coupons}} Free!
          {{/if}}
          <input type="button" class="addCoupon {{creatorClass}}" value="Add Coupon">
          {{#if coupons}}
            <input type="button" class="removeCoupon {{creatorClass}}" value="Remove Coupon">
          {{/if}}
        </span>
        <span class="{{visibleClass.edit}}">
          {{> editItem}}
        </span>
      </li>
    {{/each}}
  </ul>
</template>

<!--template name="orderItem">
  <!- form action="" method="post" -->
    <!-- span class="{{visibleClass.show}}" ->
      <span class="itemNameAndPrice">
        {{itemName}} (${{itemPrice}}) [{{_id}}]
      </span>
      <button id="orderItem" class="{{eventClass}}">Add to Order</button>
      <!- input type="number" name="itemCount" value="1">
      <input type="hidden" name="itemId" value="{{_id}}">
      <input type="submit" name="orderItem" value="Order Item" -->
    <!-- /span -->
  <!-- /form -->
<!-- /template -->



<template name="editItem">
  <form action="" method="post">
    <!-- span class="{{visibleClass.edit}}" -->
    <span class="updItemNameAndPrice">
      <input name="updItemName" value="{{itemName}}">
      $<input type="number" step="0.01" name="updItemPrice" value="{{itemPrice}}">
    </span>
    <!-- input type="hidden" name="updItemId" value="{{_id}}" -->
    <input type="submit" name="saveChanges" value="Save Changes">
    <input type="button" class="discardChanges" value="Discard Changes">

    <!-- button id=discardChanges >Discard Changes</button -->
    <!-- /span -->
  </form>
</template>




<template name="createMenuItem">
  <form action="" method="post">
    <input name="itemName" value="" placeholder="Item Name" required>
    $<input type="number" step="0.01" name="itemPrice" value="" placeholder="Item Price" required>
    <input type="submit" name="createMenuItem" value="Create New Menu Item">
  </form>
</template>



<template name="eventPizzaDayControls">
  <h2>Manage 'Pizza Day' Event</h2>
  <!-- button class="createEvent ">Create New Pizza Day Event!</button -->

  {{#if isActiveEvent}}
    <form class="" action="" method="post">
      <div class="">
        Event Date:
        <input name="eventDate" type="date" value="{{ePD.eventDate}}" >
      </div>
      <div class="">
        Event Status:
        <input type="radio" name="eventStatus" value="ordering" {{ePD.isOrdering}}> ordering |
        <input type="radio" name="eventStatus" value="ordered" {{ePD.isOrdered}}> ordered |
        <input type="radio" name="eventStatus" value="delivering" {{ePD.isDelivering}}> delivering |
        <input type="radio" name="eventStatus" value="delivered" {{ePD.isDelivered}}> delivered
      </div>

      <input type="submit" name="updateEvent" value="Update Event">
    </form>
  {{else}}
    <button class="createEvent" >Create New Event</button>
  {{/if}}

</template>





<template name="eventPizzaDay">
  {{#if isActiveEvent}}
    <h2>There is 'Pizza Day' Event Coming at {{ePD.eventDate}} ({{ePD.eventStatus}})!</h2>
    {{#if ePD.isOrdering}}{{#unless ePD.userOrderStatus}}

      <ul>
        {{#each ePD.userOrder}}
          <li>
            {{itemName}} ({{itemId}}) * {{count}}
            <button class="inc">+</button>
            <button class="del">delete</button>
          </li>
        {{/each}}
      </ul>


      Choose Items From Menu
      {{#if ePD.userOrder}}
        And <button class="confirmOrder">Confirm Order</button>
      {{/if}}
      Or <button class="discardParticipation">Discard Participation</button>


    {{/unless}}{{/if}}

    {{ePD.userStatusNote}}


  {{/if}}

</template>







<!-- template name="info">
  <h2>Learn Meteor!</h2>
  <ul>
    <li><a href="https://www.meteor.com/try">Do the Tutorial</a></li>
    <li><a href="http://guide.meteor.com">Follow the Guide</a></li>
    <li><a href="https://docs.meteor.com">Read the Docs</a></li>
    <li><a href="https://forums.meteor.com">Discussions</a></li>
  </ul>
</template -->
